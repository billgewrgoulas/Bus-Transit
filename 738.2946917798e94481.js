"use strict";(self.webpackChunkCityBus=self.webpackChunkCityBus||[]).push([[738],{738:(Zt,A,a)=>{a.r(A),a.d(A,{LinesModule:()=>_});var Y=a(9291),u=a(8252),l=a(7758),t=a(4650),p=a(9653),r=a(6895),b=a(1615),E=a(6705);function F(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"dropdown-option",4),t.NdJ("e",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.changeValue(s))}),t.qZA()}if(2&o){const e=n.$implicit;t.Q6J("text",e.desc)("details",e.name)("data",e)("flex",!1)}}class f{constructor(n,e){this.router=n,this.store=e}ngOnInit(){this.lines$=this.store.select((0,l.kb)(""))}changeValue(n){this.router.navigate([{outlets:{sidebar:["lines",n.id]}}],{queryParams:{module:"line_data"}})}onKeyUp(n){this.lines$=this.store.select((0,l.kb)(n))}prepareOutlet(n){return n&&n.activatedRouteData}}f.\u0275fac=function(n){return new(n||f)(t.Y36(u.F0),t.Y36(p.yh))},f.\u0275cmp=t.Xpm({type:f,selectors:[["lines-dropdown"]],decls:7,vars:8,consts:[[3,"value","placeholder","icon","type","title","onType"],[1,"stop-dropdown"],[1,"list"],[3,"text","details","data","flex","e",4,"ngFor","ngForOf"],[3,"text","details","data","flex","e"]],template:function(n,e){1&n&&(t.TgZ(0,"input-field",0),t.NdJ("onType",function(s){return e.onKeyUp(s)}),t.qZA(),t.TgZ(1,"div",1)(2,"h1"),t._uU(3,"Lines"),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,F,1,4,"dropdown-option",3),t.ALo(6,"async"),t.qZA()()),2&n&&(t.Q6J("value","")("placeholder","search lines")("icon","route")("type","start")("title","Lines"),t.xp6(5),t.Q6J("ngForOf",t.lcZ(6,6,e.lines$)))},dependencies:[r.sg,b.S,E.Q,r.Ov],styles:["[_nghost-%COMP%]{width:25vw;min-width:342px;display:flex;flex-direction:column;font-family:Lexend Deca,sans-serif;align-items:center}.input-section[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-end;width:100%;gap:10px;background:white;box-shadow:0 2px 5px #0000004d}.left-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:30px;padding:15px 0 35px 20px;background:rgb(221,220,229);background:linear-gradient(90deg,rgba(221,220,229,1) 0%,rgba(254,254,254,1) 100%)}.right-wrapper[_ngcontent-%COMP%]{padding-bottom:18px;width:inherit;display:flex;flex-direction:row;gap:15px}.right-wrapper[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-top:5px;cursor:pointer}.inputs[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px}input[_ngcontent-%COMP%]{outline:none;border:none;border-bottom:3px solid #f7f8fe;background:transparent;width:85%;font-size:16px;padding-bottom:16px;color:#2b3b4c;font-weight:500}.arrow[_ngcontent-%COMP%]{color:#2d3b50;font-size:33px;font-weight:600;cursor:pointer}.route[_ngcontent-%COMP%]{color:#3e3aef;font-weight:700}.stop-dropdown[_ngcontent-%COMP%]{width:100%;padding:15px}h1[_ngcontent-%COMP%]{margin-bottom:15px;color:#2b3b4c;font-family:Lexend Deca,sans-serif;font-weight:600;font-size:21px}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;max-height:calc(100vh - 200px);overflow:auto;padding-right:10px}@media screen and (max-width: 800px){[_nghost-%COMP%]{min-width:330px}}@media screen and (max-width: 700px){[_nghost-%COMP%]{min-width:270px}}@media screen and (max-width: 600px){[_nghost-%COMP%]{min-width:250px}}@media screen and (max-width: 500px){[_nghost-%COMP%]{width:100vw}}"]});var I=a(9841),k=a(8505),J=a(4004),S=a(8582),Q=a(9300),T=a(3900),N=a(2805),U=a(2468);const D={arrivals:[],buses:[]};class d extends S.m1{constructor(n,e){super(D),this.dataService=n,this.store=e,this.fetchArrivals=this.effect(i=>i.pipe((0,Q.h)(s=>!!s),(0,T.w)(s=>(0,N.H)(0,2e4).pipe((0,T.w)(()=>this.dataService.getLiveUpdates(s.code,"stops/")),(0,S._b)(c=>this.updateArrivals(c),c=>console.log(c)))))),this.fetchBusLocations=this.effect(i=>i.pipe((0,Q.h)(s=>!!s),(0,T.w)(s=>(0,N.H)(0,2e4).pipe((0,T.w)(()=>this.dataService.getLiveUpdates(s.name,"lines/")),(0,S._b)(c=>this.updateBuses(c),c=>console.log(c)))))),this.updateArrivals=this.updater((i,s)=>({arrivals:[...s],buses:[...i.buses]})),this.updateBuses=this.updater((i,s)=>({buses:[...s],arrivals:[...i.arrivals]}))}getStopArrivals(){return this.select(this.store.select(l.nC),this.getArrivalState(),(n,e)=>n?e.filter(i=>i.routeCode===n.code):[])}getBusLocations(){return this.select(this.store.select(l.nC),this.getBusState(),(n,e)=>n?e.filter(i=>i.routeCode===n.code):[])}getArrivalState(){return this.select(n=>n.arrivals)}getBusState(){return this.select(n=>n.buses)}}d.\u0275fac=function(n){return new(n||d)(t.LFG(U.D),t.LFG(p.yh))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac});var Z=a(3783),B=a(6291),$=a(1868),x=a(7047),R=a(943),z=a(47);function j(o,n){1&o&&t._UZ(0,"spinner-component")}const q=function(o,n){return["lines",o,"route",n,"map"]};function G(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input-field",1),t.NdJ("save",function(s){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onSave(s))})("remove",function(s){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onRemove(s))}),t.qZA(),t.TgZ(2,"div",2),t.YNc(3,j,1,0,"spinner-component",0),t._UZ(4,"toaster-component",3)(5,"router-outlet"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().ngIf,i=t.oxw();t.xp6(1),t.Q6J("dots",i.authenticated)("value",e.route.desc)("icon","route")("type","start")("disabled",!0)("code",e.route.code)("saved",e.saved)("title","Route details")("module","route")("mapLink",t.WLB(12,q,e.route.lineId,e.route.code)),t.xp6(2),t.Q6J("ngIf",e.spinner),t.xp6(1),t.Q6J("msg$",i.msgSubject())}}function K(o,n){if(1&o&&(t.ynx(0),t.YNc(1,G,6,15,"ng-container",0),t.BQk()),2&o){const e=n.ngIf;t.xp6(1),t.Q6J("ngIf",e.route)}}class h{constructor(n,e,i,s){this.store=n,this.localStore=e,this.auth=i,this.msg=s}ngOnInit(){this.vm$=(0,I.a)([this.store.select(l.Zd),this.store.select(l.nC),this.localStore.getBusLocations(),this.store.select(l.lY)]).pipe((0,k.b)(([n,e,i,s])=>this.msg.sendBusStatus(i)),(0,J.U)(([n,e,i,s])=>({saved:n,route:e,buses:i,spinner:s}))),this.localStore.fetchBusLocations(this.store.select(l.Wf)),this.localStore.fetchArrivals(this.store.select(l.k4))}ngOnDestroy(){this.store.dispatch(B.lP())}onSave(n){this.store.dispatch(Z.KB({code:n}))}onRemove(n){this.store.dispatch(Z.qW({code:n}))}msgSubject(){return this.msg.apiMsg}get authenticated(){return this.auth.isAuthenticated()}}h.\u0275fac=function(n){return new(n||h)(t.Y36(p.yh),t.Y36(d),t.Y36($.e),t.Y36(x._))},h.\u0275cmp=t.Xpm({type:h,selectors:[["route-details"]],features:[t._Bn([d])],decls:2,vars:3,consts:[[4,"ngIf"],[3,"dots","value","icon","type","disabled","code","saved","title","module","mapLink","save","remove"],[1,"main"],[3,"msg$"]],template:function(n,e){1&n&&(t.YNc(0,K,2,1,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.vm$))},dependencies:[r.O5,u.lC,b.S,R.O,z.B,r.Ov],styles:["[_nghost-%COMP%]{width:25vw;min-width:342px;display:flex;flex-direction:column;font-family:Lexend Deca,sans-serif;align-items:center}.input-section[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-end;width:100%;gap:10px;background:white;box-shadow:0 2px 5px #0000004d}.left-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:30px;padding:15px 0 35px 20px;background:rgb(221,220,229);background:linear-gradient(90deg,rgba(221,220,229,1) 0%,rgba(254,254,254,1) 100%)}.right-wrapper[_ngcontent-%COMP%]{padding-bottom:18px;width:inherit;display:flex;flex-direction:row;gap:15px}.right-wrapper[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-top:5px;cursor:pointer}.inputs[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px}input[_ngcontent-%COMP%]{outline:none;border:none;border-bottom:3px solid #f7f8fe;background:transparent;width:85%;font-size:16px;padding-bottom:16px;color:#2b3b4c;font-weight:500}.arrow[_ngcontent-%COMP%]{color:#2d3b50;font-size:33px;font-weight:600;cursor:pointer}.route[_ngcontent-%COMP%]{color:#3e3aef;font-weight:700}.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;width:100%;height:calc(100vh - 109px);position:relative}@media screen and (max-width: 800px){[_nghost-%COMP%]{min-width:330px}}@media screen and (max-width: 700px){[_nghost-%COMP%]{min-width:270px}}@media screen and (max-width: 600px){[_nghost-%COMP%]{min-width:250px}}@media screen and (max-width: 500px){[_nghost-%COMP%]{width:100vw}}"]});var H=a(8875);const X=function(o,n){return["lines",o,"route",n]};function W(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-option",5),t.NdJ("onSelect",function(s){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onSelect(s))}),t.qZA()}if(2&o){const e=n.$implicit;t.Q6J("icon","route")("text",e.desc)("desc",e.code)("data",t.WLB(4,X,e.lineId,e.code))}}function V(o,n){if(1&o&&(t.ynx(0),t._UZ(1,"input-field",1),t.TgZ(2,"div",2)(3,"h1"),t._uU(4,"Routes"),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,W,1,7,"app-option",4),t.ALo(7,"async"),t.qZA()(),t.BQk()),2&o){const e=n.ngIf,i=t.oxw();t.xp6(1),t.Q6J("value","Line "+e.name)("icon","route")("type","start")("disabled",!0)("title","Routes"),t.xp6(5),t.Q6J("ngForOf",t.lcZ(7,6,i.routes$))}}class C{constructor(n,e){this.store=n,this.router=e}ngOnInit(){this.routes$=this.store.select(l.O8),this.line$=this.store.select(l.Wf)}onSelect(n){this.router.navigate([{outlets:{sidebar:n}}],{queryParams:{module:"route_data"}})}}C.\u0275fac=function(n){return new(n||C)(t.Y36(p.yh),t.Y36(u.F0))},C.\u0275cmp=t.Xpm({type:C,selectors:[["route-list"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"value","icon","type","disabled","title"],[1,"main"],[1,"option-list"],[3,"icon","text","desc","data","onSelect",4,"ngFor","ngForOf"],[3,"icon","text","desc","data","onSelect"]],template:function(n,e){1&n&&(t.YNc(0,V,8,8,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.line$))},dependencies:[r.sg,r.O5,H.x,b.S,r.Ov],styles:["[_nghost-%COMP%]{width:25vw;min-width:342px;display:flex;flex-direction:column;gap:15px;font-family:Lexend Deca,sans-serif;align-items:center}.input-section[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-end;width:100%;gap:10px;background:white;box-shadow:0 2px 5px #0000004d}.left-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:30px;padding:15px 0 35px 20px;background:rgb(221,220,229);background:linear-gradient(90deg,rgba(221,220,229,1) 0%,rgba(254,254,254,1) 100%)}.right-wrapper[_ngcontent-%COMP%]{padding-bottom:18px;width:inherit;display:flex;flex-direction:row;gap:15px}.right-wrapper[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-top:5px;cursor:pointer}.inputs[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px}.arrow[_ngcontent-%COMP%]{color:#2d3b50;font-size:33px;font-weight:600;cursor:pointer}.route[_ngcontent-%COMP%]{color:#3e3aef;font-weight:700}.option-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;width:100%;overflow:auto;max-height:calc(100vh - 190px);padding-right:3px}h1[_ngcontent-%COMP%]{margin-bottom:15px;color:#2b3b4c;font-family:Lexend Deca,sans-serif;font-weight:600;font-size:21px}.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;width:100%;padding:0 15px}@media screen and (max-width: 800px){[_nghost-%COMP%]{min-width:330px}}@media screen and (max-width: 700px){[_nghost-%COMP%]{min-width:270px}}@media screen and (max-width: 600px){[_nghost-%COMP%]{min-width:250px}}@media screen and (max-width: 500px){[_nghost-%COMP%]{width:100vw}}"]});var tt=a(3811);class y{constructor(){}ngOnInit(){}}y.\u0275fac=function(n){return new(n||y)},y.\u0275cmp=t.Xpm({type:y,selectors:[["lines-map"]],decls:3,vars:0,consts:[[1,"main"],[1,"option-list"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"map-area"),t.qZA()())},dependencies:[tt.E],styles:["[_nghost-%COMP%]{width:25vw;min-width:342px;display:flex;flex-direction:column;align-items:center;height:100%}.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;width:100%;height:100%;padding:5px}@media screen and (max-width: 800px){[_nghost-%COMP%]{min-width:330px}}@media screen and (max-width: 700px){[_nghost-%COMP%]{min-width:270px}}@media screen and (max-width: 600px){[_nghost-%COMP%]{min-width:250px}}@media screen and (max-width: 500px){[_nghost-%COMP%]{width:100vw}}.option-list[_ngcontent-%COMP%]{height:calc(100vh - 120px)}"]});var nt=a(6835),et=a(440);function ot(o,n){if(1&o&&(t.TgZ(0,"span",15)(1,"span",16),t._uU(2),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.AsE("",e.arrivalMins,":",e.arrivalSeconds,"', ")}}function it(o,n){if(1&o&&(t.TgZ(0,"span",15)(1,"span",16),t._uU(2),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.AsE("",e.arrivalMins,":",e.arrivalSeconds,"'")}}function st(o,n){if(1&o&&(t.ynx(0),t.YNc(1,ot,3,2,"span",17),t.YNc(2,it,3,2,"span",17),t.BQk()),2&o){const e=n.last;t.xp6(1),t.Q6J("ngIf",!e),t.xp6(1),t.Q6J("ngIf",e)}}function at(o,n){if(1&o&&(t.TgZ(0,"span",15)(1,"span",16),t._uU(2),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.AsE("",e.departureMins,":",e.departureSeconds,"', ")}}function ct(o,n){if(1&o&&(t.TgZ(0,"span",15)(1,"span",16),t._uU(2),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.AsE("",e.departureMins,":",e.departureSeconds,"'")}}function rt(o,n){if(1&o&&(t.ynx(0),t.YNc(1,at,3,2,"span",17),t.YNc(2,ct,3,2,"span",17),t.BQk()),2&o){const e=n.last;t.xp6(1),t.Q6J("ngIf",!e),t.xp6(1),t.Q6J("ngIf",e)}}function lt(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"div",11)(2,"span",12),t._uU(3,"\u0386\u03c6\u03b9\u03be\u03b7: "),t.qZA(),t.TgZ(4,"div",13),t.YNc(5,st,3,2,"ng-container",14),t.qZA()(),t.TgZ(6,"div",11)(7,"span",12),t._uU(8,"\u0391\u03bd\u03b1\u03c7\u03ce\u03c1\u03b7\u03c3\u03b7: "),t.qZA(),t.TgZ(9,"div",13),t.YNc(10,rt,3,2,"ng-container",14),t.qZA()(),t.TgZ(11,"div",11)(12,"span",12),t._uU(13,"\u0393\u03c1\u03b1\u03bc\u03bc\u03ae: "),t.qZA(),t.TgZ(14,"span",15)(15,"span",16),t._uU(16),t.qZA()()(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",e.arrivals),t.xp6(5),t.Q6J("ngForOf",e.arrivals),t.xp6(6),t.Oqu(e.arrivals[0].lineCode)}}function pt(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",3),t.NdJ("click",function(){const c=t.CHM(e).ngIf,St=t.oxw();return t.KtG(St.flyToStop(c))}),t.TgZ(2,"div",4)(3,"div",5)(4,"div",6),t._UZ(5,"i",7),t.TgZ(6,"span",8),t._uU(7),t.qZA()(),t.TgZ(8,"div",9)(9,"span",10),t._uU(10," stairs "),t.qZA()()(),t.YNc(11,lt,17,3,"ng-container",0),t.qZA()(),t.BQk()}if(2&o){const e=n.ngIf,i=t.oxw(),s=t.MAs(5);t.xp6(7),t.AsE("",e.desc,"(",e.code,")"),t.xp6(4),t.Q6J("ngIf",i.arrivals.length>0)("ngIfElse",s)}}function dt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",18)(1,"div",4)(2,"div",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.swapTab())}),t.TgZ(3,"span",8),t._uU(4,"No station selected"),t.qZA(),t.TgZ(5,"span",15),t._uU(6,"Click to select"),t.qZA()()()()}}function gt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.swapTab())}),t.TgZ(1,"span",8),t._uU(2,"No incoming bus within 20'"),t.qZA(),t.TgZ(3,"span",15),t._uU(4,"Click to see schedule"),t.qZA()()}}class v{constructor(n,e){this.store=n,this.dataShare=e,this.onClick=new t.vpe}ngOnInit(){this.stop$=this.store.select(l.k4)}swapTab(){this.onClick.emit(0)}flyToStop(n){this.dataShare.fly([n.latitude,n.longitude])}}v.\u0275fac=function(n){return new(n||v)(t.Y36(p.yh),t.Y36(x._))},v.\u0275cmp=t.Xpm({type:v,selectors:[["station-entity"]],inputs:{arrivals:"arrivals"},outputs:{onClick:"onClick"},decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["notSelected",""],["noBus",""],[1,"entity-wrapper",3,"click"],[1,"entity-container"],[1,"entity-type"],[1,"stop-description"],[1,"fas","fa-map-marker-alt"],[1,"option-text"],[1,"icons"],[1,"material-symbols-outlined"],[1,"text-content"],[1,"malakas"],[1,"arrival-list"],[4,"ngFor","ngForOf"],[1,"description"],[1,"bold"],["class","description",4,"ngIf"],[1,"entity-wrapper"],[1,"text-content-no-incoming",3,"click"]],template:function(n,e){if(1&n&&(t.YNc(0,pt,12,4,"ng-container",0),t.ALo(1,"async"),t.YNc(2,dt,7,0,"ng-template",null,1,t.W1O),t.YNc(4,gt,5,0,"ng-template",null,2,t.W1O)),2&n){const i=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,e.stop$))("ngIfElse",i)}},dependencies:[r.sg,r.O5,r.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}.entity-wrapper[_ngcontent-%COMP%]{background:rgb(227,227,236);background:linear-gradient(90deg,rgba(227,227,236,1) 0%,rgba(255,255,255,1) 100%);margin-top:3px;width:100%;box-shadow:#63636333 0 2px 8px}.arrival-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%}.text-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:10px;width:100%}.description[_ngcontent-%COMP%]{font-size:14px;color:#8190a4}.option-text[_ngcontent-%COMP%]{font-weight:600;color:#2e3e51}.fa-map-marker-alt[_ngcontent-%COMP%]{font-size:17px}.entity-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;gap:3px;color:#545f6d;font-size:14px;padding:17px 20px;cursor:pointer;width:100%}.entity-type[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:10px;width:100%}.icons[_ngcontent-%COMP%]{margin-top:-5px}.entity-type[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{padding-top:2px}.center[_ngcontent-%COMP%]{align-self:center!important;justify-self:center!important}.icon[_ngcontent-%COMP%]{font-size:14px}.bold[_ngcontent-%COMP%]{color:#2e3e51;font-size:15px}.text-content-no-incoming[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stop-description[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.booked[_ngcontent-%COMP%]{color:#2e3e51}.unbooked[_ngcontent-%COMP%]{color:#8190a4}.malakas[_ngcontent-%COMP%]{color:#2e3e51;font-weight:700;font-size:14px}"]});var L=a(3848);function mt(o,n){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.tripTime,"', ")}}function _t(o,n){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("",e.tripTime,"'")}}function ut(o,n){if(1&o&&(t.ynx(0),t.YNc(1,mt,2,1,"span",8),t.YNc(2,_t,2,1,"span",8),t.BQk()),2&o){const e=n.last;t.xp6(1),t.Q6J("ngIf",!e),t.xp6(1),t.Q6J("ngIf",e)}}function ft(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"span",6),t._uU(2,"Departures: "),t.YNc(3,ut,3,2,"ng-container",7),t.qZA(),t.BQk()),2&o){const e=t.oxw().ngIf;t.xp6(3),t.Q6J("ngForOf",e)}}function xt(o,n){if(1&o&&(t.ynx(0),t.YNc(1,ft,4,1,"ng-container",4),t.BQk()),2&o){const e=n.ngIf;t.oxw();const i=t.MAs(8);t.xp6(1),t.Q6J("ngIf",e.length>0)("ngIfElse",i)}}function ht(o,n){1&o&&(t.TgZ(0,"span",6),t._uU(1,"No departures for this day"),t.qZA())}class w{constructor(n,e){this.store=n,this.dataShare=e,this.isLast=!1,this.onClick=new t.vpe}ngOnInit(){this.onSelect=this.dataShare.dayObserver.subscribe(n=>this.onDaySelect(n))}ngOnDestroy(){this.onSelect.unsubscribe()}onDaySelect(n){this.schedules$=this.store.select((0,l.rd)(n,this.stop.code))}selectStop(){this.store.dispatch(B.tl({code:this.stop.code})),this.onClick.emit(1)}}w.\u0275fac=function(n){return new(n||w)(t.Y36(p.yh),t.Y36(x._))},w.\u0275cmp=t.Xpm({type:w,selectors:[["list-item"]],inputs:{stop:"stop",isLast:"isLast"},outputs:{onClick:"onClick"},decls:9,vars:12,consts:[[1,"item-wrapper",3,"click"],[1,"fas","icon"],[1,"station-details"],[1,"station-name"],[4,"ngIf","ngIfElse"],["noIncoming",""],[1,"arrive-time"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return e.selectStop()}),t._UZ(1,"i",1),t.TgZ(2,"div",2)(3,"span",3),t._uU(4),t.qZA(),t.YNc(5,xt,2,2,"ng-container",4),t.ALo(6,"async"),t.qZA()(),t.YNc(7,ht,2,0,"ng-template",null,5,t.W1O)),2&n){const i=t.MAs(8);t.ekj("last-station",e.isLast),t.xp6(1),t.ekj("fa-dot-circle",!e.isLast)("fa-map-marker-alt",e.isLast),t.xp6(3),t.AsE("",e.stop.desc,"(",e.stop.code,")"),t.xp6(1),t.Q6J("ngIf",t.lcZ(6,10,e.schedules$))("ngIfElse",i)}},dependencies:[r.sg,r.O5,r.Ov],styles:[".item-wrapper[_ngcontent-%COMP%]{border-left:2px solid #6c757d2b;display:flex;flex-direction:row;align-items:flex-start;cursor:pointer;border-radius:5px}.station-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:-3px;padding-left:15px;padding-bottom:15px}.icon[_ngcontent-%COMP%]{margin-left:-7.7px;font-size:13px;color:#323541}.station-name[_ngcontent-%COMP%]{color:#373a50;font-weight:600;font-size:14px}.arrive-time[_ngcontent-%COMP%]{color:#868d95;font-size:14px}.fa-map-marker-alt[_ngcontent-%COMP%]{margin-left:-5.5px!important;font-size:15px!important}.last-station[_ngcontent-%COMP%]{border:none}@media screen and (max-width: 800px){.station-name[_ngcontent-%COMP%]{font-size:13px}}"]});var g=a(4006);function Ct(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"option",4),t._uU(2),t.qZA(),t.BQk()),2&o){const e=n.$implicit,i=n.index;t.xp6(1),t.Q6J("ngValue",i),t.xp6(1),t.Oqu(e)}}class O{constructor(n,e){this.store=n,this.dataShare=e,this.daysEng=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.placeholder="",this.module=""}ngOnInit(){}select(n){this.store.dispatch(Z.ao({code:this.payload.code})),this.dataShare.onDaySelect(n)}}O.\u0275fac=function(n){return new(n||O)(t.Y36(p.yh),t.Y36(x._))},O.\u0275cmp=t.Xpm({type:O,selectors:[["select-component"]],inputs:{placeholder:"placeholder",module:"module",payload:"payload"},decls:5,vars:2,consts:[[1,"select"],["ngModel","",3,"ngModelChange"],["value","","disabled","","selected",""],[4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"select",1),t.NdJ("ngModelChange",function(s){return e.select(s)}),t.TgZ(2,"option",2),t._uU(3),t.qZA(),t.YNc(4,Ct,3,2,"ng-container",3),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(e.placeholder),t.xp6(1),t.Q6J("ngForOf",e.daysEng))},dependencies:[r.sg,g.YN,g.Kr,g.EJ,g.JJ,g.On],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;margin-top:3px}.select[_ngcontent-%COMP%] > select[_ngcontent-%COMP%]{background:rgb(227,227,236);background:linear-gradient(90deg,rgba(227,227,236,1) 0%,rgba(255,255,255,1) 100%);box-shadow:#63636333 0 2px 8px;color:#373a50!important;font-size:14px!important;width:100%;padding:10px;cursor:pointer;border:none;outline:none}select[_ngcontent-%COMP%] > option[_ngcontent-%COMP%]{background:rgb(227,227,236);background:linear-gradient(90deg,rgba(227,227,236,1) 0%,rgba(255,255,255,1) 100%)!important;box-shadow:#63636333 0 2px 8px}"]});const yt=["stationList"];function vt(o,n){1&o&&t._UZ(0,"select-component",6),2&o&&t.Q6J("payload",n.ngIf)("placeholder","Select a day")("module","schedule")}function wt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"list-item",7),t.NdJ("onClick",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.onSelect(s))}),t.qZA()()}if(2&o){const e=n.$implicit,i=n.last;t.xp6(1),t.Q6J("stop",e)("isLast",i)}}class M{constructor(n){this.store=n,this.selectedDay=0,this.scrollPosition=0,this.onClick=new t.vpe}ngOnChanges(n){this.el&&setTimeout(()=>this.el.scrollTop=this.scrollPosition,500)}ngAfterViewInit(){this.el=this.stationList.nativeElement}ngOnInit(){this.currentRouteStops$=this.store.select(l.rN),this.currentRoute$=this.store.select(l.nC)}onScroll(n){this.scrollPosition=this.el.scrollTop}onSelect(n){this.onClick.emit(n)}}function Ot(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-tab-group",1),t.NdJ("selectedIndexChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.selectedTab=s)}),t.TgZ(2,"mat-tab",2)(3,"station-list-component",3),t.NdJ("onClick",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.slide(s))}),t.qZA()(),t.TgZ(4,"mat-tab",4)(5,"station-entity",5),t.NdJ("onClick",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.slide(s))}),t.qZA()(),t.TgZ(6,"mat-tab",6),t._UZ(7,"bus-entity",7),t.qZA()(),t.BQk()}if(2&o){const e=n.ngIf,i=t.oxw();t.xp6(1),t.Q6J("selectedIndex",i.selectedTab),t.xp6(4),t.Q6J("arrivals",e.arrivals),t.xp6(2),t.Q6J("buses",e.buses)}}M.\u0275fac=function(n){return new(n||M)(t.Y36(p.yh))},M.\u0275cmp=t.Xpm({type:M,selectors:[["station-list-component"]],viewQuery:function(n,e){if(1&n&&t.Gf(yt,5),2&n){let i;t.iGM(i=t.CRH())&&(e.stationList=i.first)}},outputs:{onClick:"onClick"},features:[t.TTD],decls:8,vars:6,consts:[[3,"payload","placeholder","module",4,"ngIf"],[1,"stations-list",3,"scroll"],["stationList",""],[1,"outer-container"],[1,"station-line"],[4,"ngFor","ngForOf"],[3,"payload","placeholder","module"],[3,"stop","isLast","onClick"]],template:function(n,e){1&n&&(t.YNc(0,vt,1,3,"select-component",0),t.ALo(1,"async"),t.TgZ(2,"div",1,2),t.NdJ("scroll",function(s){return e.onScroll(s)}),t.TgZ(4,"div",3)(5,"ul",4),t.YNc(6,wt,2,2,"li",5),t.ALo(7,"async"),t.qZA()()()),2&n&&(t.Q6J("ngIf",t.lcZ(1,2,e.currentRoute$)),t.xp6(6),t.Q6J("ngForOf",t.lcZ(7,4,e.currentRouteStops$)))},dependencies:[r.sg,r.O5,w,O,r.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;width:100%}.timeline-wrapper[_ngcontent-%COMP%]{position:relative;height:100%}.options-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stations-list[_ngcontent-%COMP%]{width:100%;color:#595959;display:flex;flex-direction:column;align-items:flex-start;height:calc(100vh - 230px);overflow:auto}.station-line[_ngcontent-%COMP%]{list-style:none}.station-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:-3px;padding-left:25px;padding-bottom:15px}.station-item[_ngcontent-%COMP%]{border-left:2px solid #6c757d2b;display:flex;flex-direction:row;align-items:flex-start;cursor:pointer;border-radius:5px}i[_ngcontent-%COMP%]{margin-left:-7.7px;font-size:13px;color:#232631}.outer-container[_ngcontent-%COMP%]{margin-left:-15px!important}.last-station[_ngcontent-%COMP%]{border:none}.last-station[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:0}.station-name[_ngcontent-%COMP%]{color:#373a50;font-weight:600}.arrive-time[_ngcontent-%COMP%]{color:#868d95}.fa-map-marker[_ngcontent-%COMP%]{margin-left:-5.5px!important;font-size:15px!important}.name-wrapper[_ngcontent-%COMP%]{width:100%;text-align:left;margin-left:40px}.stations-header[_ngcontent-%COMP%]{color:#373a50}ul[_ngcontent-%COMP%]{padding-top:10px}"]});class P{constructor(n,e){this.localStore=n,this.msg=e,this.selectedTab=0}ngOnInit(){this.vm$=(0,I.a)([this.localStore.getBusLocations(),this.localStore.getStopArrivals()]).pipe((0,J.U)(([n,e])=>({buses:n,arrivals:e})),(0,k.b)(({buses:n})=>this.msg.sendBusStatus(n)))}slide(n){this.selectedTab=n}}P.\u0275fac=function(n){return new(n||P)(t.Y36(d),t.Y36(x._))},P.\u0275cmp=t.Xpm({type:P,selectors:[["slider-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-stretch-tabs","","animationDuration","300ms",3,"selectedIndex","selectedIndexChange"],["label","Schedules"],[3,"onClick"],["label","Stop"],[3,"arrivals","onClick"],["label","Buses"],[3,"buses"]],template:function(n,e){1&n&&(t.YNc(0,Ot,8,3,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.vm$))},dependencies:[r.O5,et.N,v,L.SP,L.uX,M,r.Ov],styles:["[_nghost-%COMP%]{width:100%;padding:0 20px}.slider-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:0 10px}.option-container[_ngcontent-%COMP%]{width:100%;text-align:center;cursor:pointer;padding-bottom:3px}.option-checked[_ngcontent-%COMP%]{border-bottom:2px solid #1f63d4}.option-text[_ngcontent-%COMP%]{color:#373a50;font-weight:600;font-size:14px}  .mat-ink-bar{background-color:#1f63d4!important}  .mat-tab-label,   .mat-tab-label-active{min-width:0!important;padding:3px!important;margin:3px!important;color:#373a50!important;font-weight:700!important}"]});const Mt=[{path:"",component:f},{path:":lineCode",component:C,data:{animation:"isLeft",type:"line_module"}},{path:":lineCode/route/:routeCode",component:h,data:{animation:"isLeft",type:"routeSlider"},children:[{path:"",component:P},{path:"map",component:y,canActivate:[nt.c]}]}];class m{}m.\u0275fac=function(n){return new(n||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[u.Bz.forChild(Mt),u.Bz]});var Pt=a(6658),Tt=a(4385),bt=a(4522);class _{}_.\u0275fac=function(n){return new(n||_)},_.\u0275mod=t.oAB({type:_,bootstrap:[Y.y]}),_.\u0275inj=t.cJS({imports:[r.ez,m,g.u5,Pt.m,L.Nh,Tt.LD,bt.R]})}}]);