
<ng-container *ngIf="vm$ | async as vm">

    <input-field *ngIf="vm.stop"
        (save)="onSave($event)"
        (remove)="onRemove($event)"
        [disabled]="true"
        [value]="vm.stop.desc"
        [icon]="'trip_origin'"
        [placeholder]="'search stops'"
        [type]="'start'"
        [saved]="vm.saved"
        [dots]="authenticated"
        [module]="'stop'"
        [code]="vm.stop.code"
        [title]="'Stop details'"
        [mapLink]="[ 'stops', vm.stop.code, 'map' ]">
    </input-field>

    <div class="main">

        <spinner-component *ngIf="vm.spinner"></spinner-component>
        <toaster-component [msg$]="apiMsg"></toaster-component>

        <mat-tab-group mat-stretch-tabs animationDuration="300ms" [(selectedIndex)]="selectedTab">
            <mat-tab label="Routes">
                <div class="option-list" *ngIf="vm.routes">
                    <app-option *ngFor="let route of vm.routes"
                        (onSelect)="onNavigate($event)"
                        [icon]="'route'"
                        [text]="route.desc"
                        [desc]="route.name"
                        [data]="['lines', route.lineId, 'route', route.code]">
                    </app-option>
                </div>
            </mat-tab>
            <mat-tab label="Telematics">
                <div class="option-list" *ngIf="departures$ | async as departures">
                    <bus-entity [buses]="departures"></bus-entity>
                </div>
            </mat-tab>
        </mat-tab-group>
    </div>

</ng-container>


